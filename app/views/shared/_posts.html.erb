<% @num = 1 %>
<% @posts.each do |post| %>
  <div class="d-flex flex-column card my-2" style="max-width: 500px;" id = entire_card>

    <%# POST HEADERS %>
    <div class="d-flex flex-row  px-3 pt-3" id = header1>
      <img src="<%= id2avatar(post.user_id) %>" width="50" height="50" class="rounded-circle">
      <div class="d-flex flex-column mx-2">
        <h5 class="card-title"><%= id2name(post.user_id) %></h5>
        <p class="text-muted post-card-muted"><%= time_ago_in_words(post.created_at) %> ago</p>
      </div>
    </div>

    <%# POST MESSAGE %>
    <div class="card-body px-3">
      <p class="card-text"><%= "#{post.message}" %></p>
    </div>

    <%# POST IMAGE %>
    <img src="<%= post.image_url %>" class="img-fluid" >

     <%# LIKE AND COMMENT BUTTONS %>
    <div class="class-body post-buttons py-1" id = response_buttons>
 
        <button class="like-button post-action-buttons">
          <i class="bi bi-hand-thumbs-up-fill"></i> 
        </button><font size="2" align=left> Like</font>

        <button class="post-action-buttons" type="button">
          <i class="bi bi-chat-right-fill fa-xs"></i>
        </button><font size="2"> Comment</font>
  
    </div>

    <%# SHOW COMMENTS ON THIS POST %>
    <% post.comments.each do |comment| %>
          <div class="card-body d-flex flex-row py-1 px-1" id = comment_list>
            <img src="<%= id2avatar(comment.user_id) %>" width="35" height="35" class="rounded-circle">
            <div>
              <div>
                <p class="post-comment-display mx-2">
                  <% find_user_id = comment.user_id %>
                  <% find_user = User.find_by(id: find_user_id) %>
                  <small class="fw-bold comment-title"><%= "#{find_user[:first_name]} #{find_user[:last_name]}" %> </small>
                  <small class="comment-content"><%= comment.message %></small>
                </p>
                  <font size="1"><%= time_ago_in_words(post.created_at) %> ago</font>
              </div>
            </div>
          </div>
      <%end%>

    <%# NEW COMMENT FORM %>
      <div class="card-body d-flex flex-row p-2" id = comment_form>
        <img src="<%= id2avatar(Current.user.id) %>" width="35" height="35" class="rounded-circle">
        <div class="d-flex flex-column w-100 mx-1">
          <%= form_for @comment do |f| %>
            <%= f.hidden_field :post_id, :value => post.id %>
            <%= f.text_field :message, :placeholder => "Write a comment...", class: 'form-control form-control-sm', :id => "comment_box" %>
            <%# <%= button_tag :submit do %>
             <%# <i class="bi bi-chat-fill"></i>
            <%# <% end %>
          <% end %>
          <%# <p class="m-0"><small class="text-muted">Press enter to comment</small></p> %>
        </div>
      </div>
      </div>
    <% @num += 1 %>
    <hr>
  <% end %>

