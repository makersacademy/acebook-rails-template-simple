<main>
  <div class="row">
    <div class="col-4">
      <h5>News/Events?</h5>
    </div>
    <div class="col-5">
      <div class="d-flex flex-column card my-2 p-1" style="max-width: 500px;">
        <%= form_for @post do |f| %>
          <%= f.text_area :message, :id => "post-text-area", :placeholder => "What's on your mind?", :class => "form-control"%>
          <div class="d-flex flex-row justify-content-between">
            <a class="btn btn-primary m-1" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
              <i class="bi bi-camera-fill"></i>
            </a>
            <%= f.submit "Post", :class => 'btn btn-primary btn-sm m-1'%>
          </div>
          <div class="collapse m-2" id="collapseExample">
            <%= image_tag f.object.image_url if f.object.cached_image_data %>
            <%= f.hidden_field :image, value: f.object.cached_image_data %>
            <%= f.file_field :image , :class => 'form-control', :type => 'file' %>
          </div>
        <% end %>
      </div>
      <% @posts.each do |post| %>
        <div class="d-flex flex-column card my-2" style="max-width: 500px;">
          <div class="d-flex flex-row  px-3 pt-3">
            <img src="<%= id2avatar(post.user_id) %>" width="50" height="50" class="rounded-circle">
            <div class="d-flex flex-column mx-2">
              <h5 class="card-title"><%= id2name(post.user_id) %></h5>
              <p class="text-muted post-card-muted"><%= time_ago_in_words(post.created_at) %> ago</p>
            </div>
          </div>
          <div class="card-body px-3">
            <p class="card-text"><%= "#{post.message}" %></p>
          </div>
          <img src="<%= post.image_url %>" class="img-fluid" >
        </div>
      <% end %>
    </div>
    <div class="col-3">
      <h5>Trending?</h5>
    </div>
  </div>
</main>
